{% extends "base.html" %}

{% block content %}
<section class="team-hero">
    <div class="team-hero-logo">
        <img src="{{ url_for('static', filename='logos/' ~ team.logo) }}" alt="{{ team.name }} logo" />
    </div>
    <div class="team-hero-text">
        <h1>{{ team.name }}</h1>
        {% if season %}
        <p>Full player stats – Season {{ season }}</p>
        {% else %}
        <p>Full player stats</p>
        {% endif %}
    </div>
</section>

{% if not batting_players and not bowling_players %}
<p class="no-data">No stats found yet.</p>
<p><a href="{{ url_for('team_page', team_slug=team.slug) }}" class="link-back">
        &lt; Back to team overview
    </a></p>
{% endblock %}
{% else %}

<section class="stats-section">
    <h2>Batting – Full table</h2>

    {% if batting_players %}
    <table class="stats-table wide">
        <thead>
            <tr>
                <th>#</th>
                <th>Player</th>
                <th>Runs</th>
                <th>Inns</th>
                <th>Outs</th>
                <th>Avg</th>
                <th>SR</th>
            </tr>
        </thead>
        <tbody>
            {% for p in batting_players %}
            {% set avg = p.bat_avg|default(None) %}
            {% set sr = p.bat_sr|default(None) %}
            <tr>
                <td>{{ loop.index }}</td>
                <td>{{ p.player_name|default(p.player)|default("–") }}</td>
                <td>{{ p.bat_runs|default(0) }}</td>
                <td>{{ p.bat_innings|default(0) }}</td>
                <td>{{ p.bat_outs|default(0) }}</td>
                <td>{{ "%.2f"|format(avg) if avg is not none else "-" }}</td>
                <td>{{ "%.2f"|format(sr) if sr is not none else "-" }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <p class="no-data">No batting stats yet.</p>
    {% endif %}
</section>

<section class="stats-section">
    <h2>Bowling – Full table</h2>

    {% if bowling_players %}
    <table class="stats-table wide">
        <thead>
            <tr>
                <th>#</th>
                <th>Player</th>
                <th>Wkts</th>
                <th>Inns</th>
                <th>Balls</th>
                <th>Runs</th>
                <th>Avg</th>
                <th>Eco</th>
            </tr>
        </thead>
        <tbody>
            {% for p in bowling_players %}
            {% set bavg = p.bowl_avg|default(None) %}
            {% set eco = p.bowl_eco|default(None) %}
            <tr>
                <td>{{ loop.index }}</td>
                <td>{{ p.player_name|default(p.player)|default("–") }}</td>
                <td>{{ p.bowl_wkts|default(0) }}</td>
                <td>{{ p.bowl_innings|default(0) }}</td>
                <td>{{ p.bowl_balls|default(0) }}</td>
                <td>{{ p.bowl_runs|default(0) }}</td>
                <td>{{ "%.2f"|format(bavg) if bavg is not none else "-" }}</td>
                <td>{{ "%.2f"|format(eco) if eco is not none else "-" }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <p class="no-data">No bowling stats yet.</p>
    {% endif %}
</section>

<p><a href="{{ url_for('team_page', team_slug=team.slug) }}" class="link-back">
        &lt; Back to team overview
    </a></p>
{% endif %}
{% endblock %}